# WEB-31-Yudin-highload
Курсовая работа по highload

Студент: Юдин Данила Антонович  
Группа: WEB-31 (осень 2025)  
Старший преподаватель: Александр Быков  

# TikTok
## 1. Выбор тематики и аудитории
**Тип сервиса**: Социальные медиа, видеохостинг, развлекательный сервис  
**Основные регионы**: США (135.79M), Индонезия (107.69M), Бразилия (91.75M), Россия (55.98M) [^1]  
**Количество зарегистрированных пользователей**: 2.249B [^2]  
**Расположение дата-центров**: США, Ирландия, Норвегия, Сингапур, Малайзия [^3]  
**Основной функционал MVP**:
1. Посмотреть видео-ролик
2. Поставить лайк/дизлайк
3. Подписаться на канал/добавить в избранное
4. Выложить ролик на свой канал
5. Написать комментарий
6. Система рекоммендаций на основе распознования настроения и удержании внимания  
**Дополнительный функционал**:  
7. Поиск ролика/аккаунта по ключевому слову (+фильтры)  
8. Система продвижения (поделиться/не рекоммендовать)  
9. Технология Duet & Stitch

**Особенности**:
1. Короткий формат видео-роликов
2. Система рекомендаций, заточенная на удержание внимания
3. Технология Duet & Stitch
4. Низкий порог входа

**Отличие от других видеохостингов сервисов**:  
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Другие популярные видеохостинги, такие как Youtube позиционируется как поисковая/архивная видео-платформа со средней продолжительностей видео в 10-15 минут, нацеленная на широкую аудиторию и разнообразие жанров. В то время как TikTok предлагает преимущественно развлекательный контент длительностью ролика менее 60 секунд, нацеленная на молодежный сегмент.  
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Таким образом, Youtube - более универсальный сервис, который не имеет строго определенной аудитории, обладающим большим спектром возможностей - от обучения и развлечений до просмотра политических новостей, однако TikTok предлагает совершенно иной опыт - короткие развлекательные ролики, не требующие долгого фокуса и внимания, ориентированные на конкретные интересы и предпочтения.

**Конкуренция**:  
1. Youtube Shorts
2. Instagram Reels
3. Snapchat Spotlight

## 2. Расчет нагрузки

### Аудиторные метрики
Информация найдена в интернете. Все ссылки на источники будут расположены в конце РПЗ

| Метрика                                          | Значение |
| ------------------------------------------------ | -------- |
| MAU                                              | 1.582B [^4]   |
| DAU                                              | 875.736M [^5] |
| Количество зарегистрированных пользователей      | 2.249B [^2]   |
| Количество аккаунтов, активно выпускающая ролики | 1.5M     |
| Количество роликов выпускаемых в минуту          | 16000 [^8]     |

### Продуктовые метрики
Информация найдена путем личного эксперимента (кроме "средней продолжительности сессии"). Данные приблизительные и могут неточно отражать действительность.

| Метрика                                             | Значение |
| --------------------------------------------------- | -------- |
| Средняя продолжительность сессии*                   | 53.8 мин [^6] |
| Средняя продолжительность ролика                    | 27.5 сек |
| Среднее количество лайков/дизлайков на 1000 роликов | 30       |
| Среднее количество подписок на 1000 роликов         | 1        |
| Среднее количество комментариев на 1000 роликов     | 20       |
| Bitrate                                             | 7.5 Mbps |

### Технические метрики
&nbsp;&nbsp;&nbsp;&nbsp;Был произведен расчет среднего количества просмотренных роликов одним пользователем в день. Предполагается, что пользователь на протяжении всей сессии только смотрел ролики:  


**Просмотров в день на одного пользователя**: &nbsp;&nbsp;
$\frac{\text{Продолжительность сессии}}{\text{Продолжительность ролика}} = \frac{53.8 \text{ мин}}{27.5 \text{ сек}} = \frac{3228 \text{ сек}}{27.5 \text{ сек}} \approx 117$  &nbsp;&nbsp;&nbsp;&nbsp;             **(1)**  


### Трафик


&nbsp;&nbsp;&nbsp;&nbsp;Следующим шагом стал расчёт трафика. Для этого был высчитан вес одного видео-ролика и умножив его на количество просмотров в день и на количество активных пользователей в день - был получен общий трафик проходящий через сервера:  


**Вес одного среднего по продолжительности ролика**:  &nbsp;&nbsp;
$\text{Вес ролика} = \text{Битрейт} \times \text{Продолжительность} = ( \frac{7.5}{8} ) \times 27.5 \approx 25.78 \text{ МБ}$ &nbsp;&nbsp;&nbsp;&nbsp; **(2)**
**Общий объем подкачки роликов**: &nbsp;&nbsp;
$DAU \times \text{Продолжительность сессии} \times\text{Вес ролика} = 117 \times 25.78 \times 875.736 \times 10^6=2579.6 Pb$  &nbsp;&nbsp;&nbsp;&nbsp; **(3)**
**Общий объем мета-данных**:   &nbsp;&nbsp;&nbsp;&nbsp; **(4)**
$DAU \times \text{Продолжительность сессии} \times (\text{Средний вес аватарки} \times \text{Среднее количество символов в описании} \times\text{кодировка UTF-8}) = 117 \times 875.736 \times (0.01 + 50 \times 10^{-6})=1 Pb$  
**Общий объем подкачки комментариев**: &nbsp;&nbsp;&nbsp;&nbsp; **(5)**
$DAU \times \text{Продолжительность сессии} \times\text{10 комментариев подкачки} \times (\text{Среднее количество символов в комментарии} \times\text{кодировка UTF-8}) = 117 \times 875.736 \times 10 \times 50 \times 10^{-6}=1 Tb$ 
**Общий объем исходящего трафика**: &nbsp;&nbsp;&nbsp;&nbsp; **(6)**  
$\text{Объем подкачки роликов} + \text{Объем мета-данных} + \text{Объем подкачки комментариев} = 2580 Pb$


&nbsp;&nbsp;&nbsp;&nbsp;Для расчета ежедневного трафика нагрузки на память серверов была найдена информация сколько ежеминутно выкладывается роликов [^7] и, зная вес одного среднего по продолжительности видео, был найден общий объем (*Примечание - объем HTTP запроса с JSON данными о событии лайка/подписки пренебрежительно мал по сравнению с другими показателями ):


**Количество роликов выложенных пользователями за день**:&nbsp;&nbsp; $\text{Роликов в минуту} \times 60 \times 24 = 16{,}000 \times 60 \times 24 = 23.04 \text{ млн}$&nbsp;&nbsp;&nbsp;&nbsp;  **(7)**
**Ежедневный входящий трафик**:&nbsp;&nbsp;
$\text{Количество роликов} \times \text{Вес ролика} = 23.04 \times 10^6 \times 25.78 \text{ МБ} \approx 566.46 \text{ ТБ}$&nbsp;&nbsp;&nbsp;&nbsp; **(8)**  


|                  | Общий объем в день | Средняя нагрузка | Пиковая нагрузка |
|------------------|--------------------|------------------|------------------|
| Исходящий трафик | 2580 Pb            | 30.5 Tb/s        | 146.7 Tb/s       |
| Входящий трафик  | 566 Tb             | 6.7 Gb/s         | 32.2 Gb/s        |


### Хранилище


&nbsp;&nbsp;&nbsp;&nbsp;Для того, чтобы понять какой объем данных содержится на сервере на одного пользователя и общее количество информации необходимо узнать сколько роликов выходят на одного пользователя. По данным stata известно, что каждую минуту выходит 16000 роликов в минуту. Пересчитав это на день и поделив на DAU - станет явным, сколько роликов приходится на одного пользователя в день. Для упрощения расчетов, примим DAU постоянным во времени. Тогда можно будет узнать сколько роликов было выпушено за все время на одного пользователя и каков этот объем данных:

**Количество роликов в день**:&nbsp;&nbsp;
$\text{Количество роликов в минуту} \times \text{Количество минут в дне} = 16000 \times 1440 \approx 23.04 \text{ млн}$&nbsp;&nbsp;&nbsp;&nbsp; **(9)**  
**Количество роликов на одного пользователя в день**:&nbsp;&nbsp;
$\frac{\text{Количество роликов в день}}{\text{DAU}} = \frac{23.04}{875.736} = 0.026$ &nbsp;&nbsp;&nbsp;&nbsp;**(10)**  
**Хранилище одного пользователя**:&nbsp;&nbsp;
$\text{Количество роликов в день} \times \text{Количество дней существования} \times \text{Вес ролика} = 0.026 \times 2555 \times 25.78 = 1.67\text{ Gb}$&nbsp;&nbsp;&nbsp;&nbsp; **(11)**  
**Хранилище всех пользователей**:&nbsp;&nbsp;**(12)**  
$\text{Хранилище одного пользователя} \times \text{Количество зарегистрированных} = 1.67 \times 2.249 \times 10^{9} = 3755\text{ Pb}$&nbsp;&nbsp;&nbsp;&nbsp; 

|                                                  | Объем данных |
| ------------------------------------------------ | --------     |
| Хранилище одного пользователя                    | 1.67 Gb      |
| Хранилище всех пользователей                     | 3755 Pb      |


### RPS


&nbsp;&nbsp;&nbsp;&nbsp;Очередным этапом стала оценка количества запросов на чтение и запись в день. Для этого были умножены следующие метрики: количество активных пользователей в день, количество просмотров в день на одного пользователя и вероятность на 1000 роликов лайков/дизлайков, подписок, комментариев.  

**Количество лайков в день**:&nbsp;&nbsp;
$\text{DAU} \times \text{Просмотров на пользователя} \times \text{Вероятность лайка} = 875.736 \times 10^6 \times 117 \times 0.03 \approx 2.627 \text{ млрд}$&nbsp;&nbsp;&nbsp;&nbsp; **(13)**  
**Количество комментов в день**: **(14)**  
$\text{DAU} \times \text{Просмотров на пользователя} \times \text{Вероятность коммента} = 875.736 \times 10^6 \times 117 \times 0.02 \approx 2.05 \text{ млрд}$  
**Количество подписок в день**: **(15)**  
$\text{DAU} \times \text{Просмотров на пользователя} \times \text{Вероятность подписок} = 875.736 \times 10^6 \times 117 \times 0.001 \approx 102.5 \text{ млн}$&nbsp;&nbsp;  
**Количество регистраций в день**: **(16)**  
$\frac{\text{Количество скачиваний в год}}{\text{Количество дней в году}} = \frac{875.67 \times 10^6}{365} \approx 2.4 \text{ млн}$&nbsp;&nbsp;  

 
&nbsp;&nbsp;&nbsp;&nbsp;Заключительным этапом расчета технических метрик стало нахождение среднего и пикового RPS на чтение и запись. RPS на чтение определен из просмотров пользователя. Стоит принять во внимание, что ролики для просмотра грузятся одним стеком в 5 шт., а для расчета пикового RPS был взят коэффицент доли дневного трафика на пиковый час, равный ~20%:


**Количество запросов в день на чтение (RPD)**:&nbsp;&nbsp;**(17)**  
$$\text{DAU} \times \frac{\text{Просмотров на пользователя}}{5} = 875.736 \times 10^6 \times \frac{117}{5} = 875.736 \times 10^6 \times 23.4 \approx 20.492 \text{ млрд}$$   

**Средний RPS на чтение**:&nbsp;&nbsp;&nbsp;&nbsp;
$$\text{RPS}_{\text{avg}} = \frac{\text{RPD}}{86400 \text{ (секунд в дне)}} = \frac{20.492 \times 10^9}{86400} \approx 237179$$ &nbsp;&nbsp;  **(18)**  

**Пиковый RPS на чтение**: &nbsp;&nbsp;&nbsp;&nbsp; 
$$\text{RPS}_{\text{peak}} = \frac{\text{RPD} \times 0.2}{3600 \text{ (секунд в часе)}} = \frac{20.492 \times 10^9 \times 0.2}{3600} \approx 1138457$$ &nbsp;&nbsp;  **(19)**


&nbsp;&nbsp;&nbsp;&nbsp;RPS на запись определен из действий пользователя, таких как: лайк/дизлайк, подписка, комментарий и загрузка видео-ролика. Стоит принять во внимание, что для расчета пикового RPS был взят коэффицент доли дневного трафика на пиковый час, равный ~20%:


**Количество запросов в день на запись (RPD)**:&nbsp;&nbsp; **(20)**  
$$\text{Количество лайков в день} + \text{Количество комментариев в день} + \text{Количество подписок в день} + \text{Количество загрузок в день} = 2.672 + 2.05 + 0.1025 + 0.02304 = 4.84754 \text{ млрд}$$   

**Средний RPS на запись**:&nbsp;&nbsp;&nbsp;&nbsp;
$$\text{RPS}_{\text{avg}} = \frac{\text{RPD}}{86400 \text{ (секунд в дне)}} = \frac{4.84754 \times 10^9}{86400} \approx 56106$$ &nbsp;&nbsp; **(21)**  

**Пиковый RPS на запись**:&nbsp;&nbsp;&nbsp;&nbsp;
$$\text{RPS}_{\text{peak}} = \frac{\text{RPD} \times 0.2}{3600 \text{ (секунд в часе)}} = \frac{4.84754 \times 10^9 \times 0.2}{3600} \approx 269308$$ &nbsp;&nbsp; **(22)**


|                  | Количество запросов в день | RPS среднее | RPS пиковое |
|------------------|----------------------------|-------------|-------------|
| Просмотр ролика  | 20.462 млрд                | 237179      | 1138457     |
| Выпуск ролика    | 23.04 млн                  | 267         | 1280        |
| Лайк/дизлайк     | 2.627 млрд                 | 30406       | 145945      |
| Комментарий      | 2.05 млрд                  | 23727       | 113889      |
| Подписка         | 102.5 млн                  | 1187        | 5695        |
| Регистрация      | 2.4 млн                    | 28          | 134         |
| ***Итог***       | ***25.267 млрд***          | ***292442***| ***1403719***|


| Метрика                                          | Значение |
| ------------------------------------------------ | -------- |
| Средний RPS на чтение                            | 237179   |
| Пиковый RPS на чтение                            | 1138457  |
| Средний RPS на запись                            | 56106    |
| Пиковый RPS на запись                            | 269308   |

## Список используемых источников:
[^1]: [Основные регионы по распространенности сервиса I](https://www.statista.com/statistics/1299807/number-of-monthly-unique-tiktok-users/), [Основные регионы по распространенности сервиса II](https://www.demandsage.com/tiktok-user-statistics/)
[^2]: [Количество зарегистрированных пользователей I](https://www.demandsage.com/tiktok-user-statistics/), [Количество зарегистрированных пользователей II](https://datareportal.com/reports/digital-2025-july-global-statshot)
[^3]: [Расположение дата-центров](https://dgtlinfra.com/tiktok-data-centers-cloud-locations/)
[^4]: [Количество активных пользователей за месяц I](https://www.statista.com/statistics/272014/global-social-networks-ranked-by-number-of-users/), [Количество активных пользователей за месяц II](https://en.wikipedia.org/wiki/List_of_social_platforms_with_at_least_100_million_active_users)
[^5]: [Количество активных пользователей за день](https://www.semrush.com/analytics/overview/?q=tiktok.com&searchType=domain&protocol=https&utm_source=explodingtopics.com&utm_medium=referral&utm_campaign=time-spent-on-tiktok)
[^6]: [Средняя продолжительность сессии](https://www.statista.com/statistics/1301075/us-daily-time-spent-social-media-platforms/)
[^7]: [Количество роликов, выкладываемых в минуту](https://www.statista.com/statistics/195140/new-user-generated-content-uploaded-by-users-per-minute/)
[^8]: [Количество роликов выпускаемых в минуту](https://www.statista.com/statistics/195140/new-user-generated-content-uploaded-by-users-per-minute/)
[^9]: [Количество скачиваний в год](https://www.statista.com/statistics/1377008/tiktok-worldwide-downloads-quarterly/)

